{"flow":{"onboarding":{"$contentActions":[{"input":{"bypass":false,"$cardContent":{"document":{"id":"1e909b5f-5e50-42cb-8436-b1e1af6a8700","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":false,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"welcome","conditions":[{"source":"input","comparison":"matches","values":[".*"]}],"$id":"8092399a-0cb9-46a0-b8b2-8917553ad4a9","$connId":"con_3","$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"onboarding","root":true,"$title":"Início","$position":{"top":"120px","left":"644px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"fallback":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"259bba23-7fd5-4b16-bab1-09b895f7f06d","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"515a9499-dc58-40ab-993d-a57ee436fd4f","typeOfStateId":"state","$connId":"con_8","$id":"c5232f38-991b-4dd7-b82e-eb2ccd4d6049","conditions":[{"source":"input","comparison":"equals","values":["/start"]}],"$invalid":false},{"stateId":"error","conditions":[{"source":"input","comparison":"exists","values":[]}],"$id":"d35ce112-d0da-4d2d-a5d2-65c2dba39048","$connId":"con_13","$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[],"id":"fallback","$title":"Exceções","$position":{"top":"196px","left":"1899px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"welcome":{"$contentActions":[{"action":{"$id":"20304584-e1e6-4410-aa0d-b09d49519b72","$typeOfContent":"","type":"SendMessage","settings":{"id":"00000000-0000-0000-0000-000000000000","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"00000000-0000-0000-0000-000000000000","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left","editing":false}},"$invalid":false},{"action":{"$id":"c5684794-3d44-47b2-83de-374a0205e9af","$typeOfContent":"","type":"SendMessage","settings":{"id":"00000000-0000-0000-0000-000000000001","type":"text/plain","content":"Olá! Bem vindo ao FinChat. Serei seu assistente financeiro e te ajudarei a ter mais controle sobre seus gastos. Para começarmos, me diga seu nome:","metadata":{}},"$cardContent":{"document":{"id":"00000000-0000-0000-0000-000000000001","type":"text/plain","content":"Olá! Bem vindo ao FinChat. Serei seu assistente financeiro e te ajudarei a ter mais controle sobre seus gastos. Para começarmos, me diga seu nome:"},"editable":true,"deletable":true,"position":"left","editing":false}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"bfc360c0-05b3-4a7a-bfd5-efdbc75dabb7","type":"text/plain","content":"userName"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"variable":"userName"},"$invalid":false}],"$conditionOutputs":[{"stateId":"7e113d58-7c0c-4ca3-a990-59b31a39e4cd","typeOfStateId":"state","$connId":"con_18","$id":"ebcef008-a626-4bc3-b33a-2b8f87a4ce5a","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"8c7598ed-cf29-4655-adf4-2afd33b2b7cb","$typeOfContent":"","type":"SetVariable","$title":"VARIABLE: expensesHistory","$invalid":false,"settings":{"variable":"expensesHistory","value":"[]"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"welcome","$title":"Boas vindas","$position":{"top":"240px","left":"644px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"error":{"$contentActions":[{"action":{"$id":"b9d56ea8-6bbe-430f-8358-c80ebe5a30e2","$typeOfContent":"","type":"SendMessage","settings":{"id":"00000000-0000-0000-0000-000000000002","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"00000000-0000-0000-0000-000000000002","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left","editing":false}},"$invalid":false},{"action":{"$id":"d0b82257-b6f3-44f8-892e-4cb4b126210a","$typeOfContent":"","type":"SendMessage","settings":{"id":"00000000-0000-0000-0000-000000000003","type":"text/plain","content":"Desculpe, não consegui entender. Para registrar um gasto, digite: \n\n/gasto","metadata":{}},"$cardContent":{"document":{"id":"00000000-0000-0000-0000-000000000003","type":"text/plain","content":"Desculpe, não consegui entender. Para registrar um gasto, digite: \n\n/gasto"},"editable":true,"deletable":true,"position":"left","editing":false}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"4cb49fbf-702e-4f3f-9815-6c36df3fdb8d","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"9b94139b-84e2-4c99-b1e1-87296002836a","typeOfStateId":"state","$connId":"con_23","$id":"04066415-4406-44e8-82d0-6371f939f6ca","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[],"id":"error","$title":"Input inesperado","$position":{"top":"326px","left":"1899px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"7e113d58-7c0c-4ca3-a990-59b31a39e4cd":{"$contentActions":[{"action":{"$id":"93597bf4-4921-460a-bfea-0478c78f666e","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"1c094be3-2c84-45a2-866d-e31277849c60","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"1c094be3-2c84-45a2-866d-e31277849c60","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"f0318866-d88d-42ca-af5f-0def5d29c43e","$typeOfContent":"text","type":"SendMessage","settings":{"id":"3b869f8e-a496-4e31-9a93-a5a04ed44bfe","type":"text/plain","content":"Ótimo, {{userName}}!  A partir de agora, sempre que tiver um novo gasto digite:\n\n/gasto","metadata":{}},"$cardContent":{"document":{"id":"3b869f8e-a496-4e31-9a93-a5a04ed44bfe","type":"text/plain","content":"Ótimo, {{userName}}!  A partir de agora, sempre que tiver um novo gasto digite:\n\n/gasto"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"79d45105-ad05-49af-be2b-a93b3b3c39bf","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"18d96872-5fc4-4c01-a38d-3eb8036410a2","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"18d96872-5fc4-4c01-a38d-3eb8036410a2","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"0ad0cf5e-7f95-41dd-8069-c169053f1d4a","$typeOfContent":"text","type":"SendMessage","settings":{"id":"c2d5ac91-633b-4662-8da4-f4583c160b5f","type":"text/plain","content":"No final de cada semana e de cada mês te enviarei um relatório informando quanto e como você gastou.\nAssim, você poderá gerenciar melhor suas despesas.","metadata":{}},"$cardContent":{"document":{"id":"c2d5ac91-633b-4662-8da4-f4583c160b5f","type":"text/plain","content":"No final de cada semana e de cada mês te enviarei um relatório informando quanto e como você gastou.\nAssim, você poderá gerenciar melhor suas despesas."},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"9fc113d9-8cf6-4381-a1ed-6bd7e7e6109b","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"7938f626-d391-4b46-a216-9ebb0b484295","typeOfStateId":"state","$connId":"con_28","$id":"282a251f-bdc7-4eb0-871b-7a588deb02c8","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"7e113d58-7c0c-4ca3-a990-59b31a39e4cd","root":false,"$title":"Instruções","$position":{"top":"375px","left":"644px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"75c3f7e6-ce3f-419f-8e37-4ef0bd8ec98b":{"$contentActions":[{"action":{"$id":"97a02b02-4ed3-4485-b7d0-0502fda2866b","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"c773b6ac-0da7-47e9-b992-14cccd11cd3e","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"c773b6ac-0da7-47e9-b992-14cccd11cd3e","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"8e35230c-93a6-48ca-a9a8-4f3c30e87689","$typeOfContent":"select","type":"SendMessage","settings":{"id":"08d64627-b7c2-4a41-9b49-12bfc347afd6","type":"application/vnd.lime.select+json","content":{"text":"Escolha uma opção:","options":[{"text":"Registrar gasto","previewText":"Registrar gasto","value":"/gasto","index":0,"type":"text/plain"},{"index":-1,"text":"Consultar gastos","type":"text/plain","value":"/consultar","previewText":"Consultar gastos"}]},"metadata":{}},"$cardContent":{"document":{"id":"08d64627-b7c2-4a41-9b49-12bfc347afd6","type":"application/vnd.lime.select+json","content":{"text":"Escolha uma opção:","options":[{"text":"Registrar gasto","previewText":"Registrar gasto","value":"/gasto","index":0,"type":"text/plain"},{"index":-1,"text":"Consultar gastos","type":"text/plain","value":"/consultar","previewText":"Consultar gastos"}]}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"6a1b164f-4c2e-4ee0-a10f-6464efd524ac","type":"text/plain","textContent":"Entrada do usuário","content":"menuInput"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"variable":"menuInput"},"$invalid":false}],"$conditionOutputs":[{"stateId":"dec9841a-34d7-4b6d-91a0-d840a14fcacd","typeOfStateId":"state","$connId":"con_33","$id":"f3cba1c0-689a-471b-99b4-7c9f4fc7c707","conditions":[{"source":"input","comparison":"equals","values":["/gasto"]}],"$invalid":false},{"stateId":"1cfe1499-e73f-404a-aa99-69faa0e1f14d","typeOfStateId":"state","$connId":"con_38","$id":"836c0013-653f-4adc-9883-633eb962a091","conditions":[{"source":"input","comparison":"equals","values":["/consultar"]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":["/gasto","/consultar"],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"75c3f7e6-ce3f-419f-8e37-4ef0bd8ec98b","root":false,"$title":"Menu","$position":{"top":"221px","left":"1002px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"7938f626-d391-4b46-a216-9ebb0b484295":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"1338e29b-03a0-46d6-8223-44982322ee1e","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"75c3f7e6-ce3f-419f-8e37-4ef0bd8ec98b","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"7938f626-d391-4b46-a216-9ebb0b484295","root":false,"$title":"[GO TO] Menu","$position":{"top":"513px","left":"644px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"dec9841a-34d7-4b6d-91a0-d840a14fcacd":{"$contentActions":[{"action":{"$id":"8fdb388d-b3b6-4eaa-ba7d-12d11cb0c3a4","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"8a63fa2c-df47-4130-a6a4-49a12d58cc56","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"8a63fa2c-df47-4130-a6a4-49a12d58cc56","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"4626d298-8756-43d6-9152-089972f50d13","$typeOfContent":"text","type":"SendMessage","settings":{"id":"b4493749-2659-4f2a-ac13-2c34122fb208","type":"text/plain","content":"Qual o valor do seu gasto?","metadata":{}},"$cardContent":{"document":{"id":"b4493749-2659-4f2a-ac13-2c34122fb208","type":"text/plain","content":"Qual o valor do seu gasto?"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"aeb91664-99fb-4669-a919-3c4528e68e03","type":"text/plain","textContent":"Entrada do usuário","content":"expenseValue"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"variable":"expenseValue"},"$invalid":false}],"$conditionOutputs":[{"stateId":"97cb6693-8433-4803-806c-f995402188c5","typeOfStateId":"state","$connId":"con_43","$id":"9c6d76a6-4784-4e2d-8f87-0517e47fcbea","conditions":[{"source":"input","comparison":"equals","values":["/start"]}],"$invalid":false},{"stateId":"b9b106af-9958-4030-a81d-454596a437f5","typeOfStateId":"state","$connId":"con_48","$id":"46cb0e26-c102-4cf5-b292-d2f912276697","conditions":[{"source":"context","comparison":"notExists","values":[],"variable":"expenseValue"}],"$invalid":false},{"stateId":"8de91f45-e5ab-45c6-bb42-4ea096e51d35","typeOfStateId":"state","$connId":"con_53","$id":"fa3de488-a66a-49b6-82a7-52c9cfca91e5","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"4ce32ad2-64e5-4f42-998d-f1c8521d5197","$typeOfContent":"","type":"ExecuteScript","$title":"Format number","$invalid":false,"settings":{"function":"run","source":"function run(expenseValue) {\n    expenseValue = expenseValue.replace(',', '.');\n\n    expenseValue = expenseValue.replace(/\\.(?=.*\\.)/g, '');\n    expenseValue = expenseValue.replace(/[^0-9.]/g, '');\n\n    return expenseValue;\n}","inputVariables":["expenseValue"],"outputVariable":"expenseValue"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"dec9841a-34d7-4b6d-91a0-d840a14fcacd","root":false,"$title":"Registro de gasto","$position":{"top":"221px","left":"1248px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"9b94139b-84e2-4c99-b1e1-87296002836a":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"d70b9070-1bd6-4f35-91b1-52c8b441a9b6","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"75c3f7e6-ce3f-419f-8e37-4ef0bd8ec98b","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"9b94139b-84e2-4c99-b1e1-87296002836a","root":false,"$title":"[GO TO] Menu","$position":{"top":"455px","left":"1899px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"8de91f45-e5ab-45c6-bb42-4ea096e51d35":{"$contentActions":[{"action":{"$id":"c5116573-09e6-4d42-b955-8f55c0aa0fed","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"2900ed63-9eaf-4718-82bb-1ac7572d8086","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"2900ed63-9eaf-4718-82bb-1ac7572d8086","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"8ee281d1-21ac-4d95-b691-737e8b49b8a9","$typeOfContent":"text","type":"SendMessage","settings":{"id":"78182055-ea97-4128-aa59-1cb307d42cdb","type":"text/plain","content":"Com o que você gastou?","metadata":{}},"$cardContent":{"document":{"id":"78182055-ea97-4128-aa59-1cb307d42cdb","type":"text/plain","content":"Com o que você gastou?"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"3ca72ab7-b12d-4537-9bf8-2c5ead09653d","type":"text/plain","textContent":"Entrada do usuário","content":"expenseDescription"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"variable":"expenseDescription"},"$invalid":false}],"$conditionOutputs":[{"stateId":"df48366e-8a92-42ac-8adb-6fcb48a84694","typeOfStateId":"state","$connId":"con_58","$id":"920d1f37-530f-447d-a2fb-ee8bc92e9d3e","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"8de91f45-e5ab-45c6-bb42-4ea096e51d35","root":false,"$title":"Descrição do gasto","$position":{"top":"360px","left":"1248px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"df48366e-8a92-42ac-8adb-6fcb48a84694":{"$contentActions":[{"action":{"$id":"e0382672-84b4-4013-ac40-15acb1189e56","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"b2633a3a-5393-49fc-ae1b-6c46478be5c2","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"b2633a3a-5393-49fc-ae1b-6c46478be5c2","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"a7b26e41-229b-4ace-8a27-0d581f068c24","$typeOfContent":"text","type":"SendMessage","settings":{"id":"686b4efe-5ffa-4463-b48e-c2184dd0774a","type":"text/plain","content":"Qual a categoria do gasto?","metadata":{}},"$cardContent":{"document":{"id":"686b4efe-5ffa-4463-b48e-c2184dd0774a","type":"text/plain","content":"Qual a categoria do gasto?"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"3c1ae654-00e1-4dd7-8ba6-fc2be76c4b56","type":"text/plain","textContent":"Entrada do usuário","content":"expenseCategory"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"variable":"expenseCategory"},"$invalid":false}],"$conditionOutputs":[{"stateId":"83d6ff9b-98f8-48a3-909f-e1622ff4e0ec","typeOfStateId":"state","$connId":"con_63","$id":"96059d9b-74ba-4f10-a8d0-7276e19cecb5","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"df48366e-8a92-42ac-8adb-6fcb48a84694","root":false,"$title":"Categoria do gasto","$position":{"top":"493px","left":"1248px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"83d6ff9b-98f8-48a3-909f-e1622ff4e0ec":{"$contentActions":[{"action":{"$id":"b53a0178-1429-4a3d-8227-94e4a15229c8","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"2cd2e226-c3f5-4095-af8c-1227d0db9577","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"2cd2e226-c3f5-4095-af8c-1227d0db9577","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"c9042231-2e73-498e-8f74-17158a91bb51","$typeOfContent":"text","type":"SendMessage","settings":{"id":"f30508e4-7578-493b-a522-161529bede16","type":"text/plain","content":"Ok! Seu gasto foi registrado","metadata":{}},"$cardContent":{"document":{"id":"f30508e4-7578-493b-a522-161529bede16","type":"text/plain","content":"Ok! Seu gasto foi registrado"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"3a11acb1-6817-4559-87f9-b6a874f83163","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"59bde04a-d35a-4373-bb52-efab01a17f8f","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"59bde04a-d35a-4373-bb52-efab01a17f8f","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"d2802f60-7163-40d5-a00b-1466aa9c79e1","$typeOfContent":"text","type":"SendMessage","settings":{"id":"341d7c2a-c0f3-4f0c-adb4-80915b92334d","type":"text/plain","content":"Valor: {{expenseValueFormated}}\nDescrição: {{expenseDescription}}\nCategoria: {{expenseCategory}}","metadata":{}},"$cardContent":{"document":{"id":"341d7c2a-c0f3-4f0c-adb4-80915b92334d","type":"text/plain","content":"Valor: {{expenseValueFormated}}\nDescrição: {{expenseDescription}}\nCategoria: {{expenseCategory}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"944b612a-28b4-4229-8422-45cb834344cb","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"d9fe3e86-7845-4177-8573-0032ce212436","typeOfStateId":"state","$connId":"con_68","$id":"841b6f7f-4591-40f9-a419-9a93e025541a","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"d2452ba8-f9a3-45ee-a31e-7762f6d2bcf6","$typeOfContent":"","type":"ExecuteScript","$title":"Format value","$invalid":false,"settings":{"function":"run","source":"function run(expenseValue) {\n    let expenseValueFormated = \"R$ \" + parseFloat(expenseValue).toFixed(2).toString().replace('.', ',');\n    return expenseValueFormated;\n}","inputVariables":["expenseValue"],"outputVariable":"expenseValueFormated","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"58f91b72-47f7-487b-a4ce-816b5d279938","$typeOfContent":"","type":"ExecuteScript","$title":"SCRIPT: Add expense to history","$invalid":false,"settings":{"function":"run","source":"function run(expensesHistory, expenseValue, expenseDescription, expenseCategory) {\n    expensesHistory = JSON.parse(expensesHistory);\n\n    let now = new Date();\n    let nowFormatted = `${pad(now.getDate())}/${pad(now.getMonth() + 1)}/${pad(now.getFullYear())}`;\n\n    expensesHistory.push({ expenseValue: parseFloat(expenseValue).toFixed(2), expenseDescription, expenseCategory, dateTime: nowFormatted });\n\n    return JSON.stringify(expensesHistory);\n}\n\nfunction pad(valor, padNumber = 2) { \n    return valor.toString().padStart(padNumber, '0');\n}","inputVariables":["expensesHistory","expenseValue","expenseDescription","expenseCategory"],"outputVariable":"expensesHistory","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"83d6ff9b-98f8-48a3-909f-e1622ff4e0ec","root":false,"$title":"Finalizar registro","$position":{"top":"634px","left":"1248px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"d9fe3e86-7845-4177-8573-0032ce212436":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"d70b9070-1bd6-4f35-91b1-52c8b441a9b6","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"75c3f7e6-ce3f-419f-8e37-4ef0bd8ec98b","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"d9fe3e86-7845-4177-8573-0032ce212436","root":false,"$title":"[GO TO] Menu","$position":{"top":"634px","left":"1476px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"b9b106af-9958-4030-a81d-454596a437f5":{"$contentActions":[{"action":{"$id":"00158fde-163f-4c28-b3d2-84a86694ccb9","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"300c70ca-a189-4a08-ad45-199bc369a22c","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"300c70ca-a189-4a08-ad45-199bc369a22c","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"62924189-7ccb-471a-8d4b-3a27171bce88","$typeOfContent":"text","type":"SendMessage","settings":{"id":"92da7d1b-c779-48c3-bf85-69f02b30ea80","type":"text/plain","content":"Digite um número válido","metadata":{}},"$cardContent":{"document":{"id":"92da7d1b-c779-48c3-bf85-69f02b30ea80","type":"text/plain","content":"Digite um número válido"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"bdf4af4d-b766-4d18-8a78-f711bd91c061","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"dec9841a-34d7-4b6d-91a0-d840a14fcacd","typeOfStateId":"state","$connId":"con_73","$id":"8ffa58c1-0237-43c8-8d53-b615d4420d50","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"b9b106af-9958-4030-a81d-454596a437f5","root":false,"$title":"Número inválido","$position":{"top":"221px","left":"1469px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"97cb6693-8433-4803-806c-f995402188c5":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"f061d654-eaa5-4bbf-8f1a-28cb90f6c802","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"welcome","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"97cb6693-8433-4803-806c-f995402188c5","root":false,"$title":"[GO TO] Boas vindas","$position":{"top":"93px","left":"1248px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"515a9499-dc58-40ab-993d-a57ee436fd4f":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"f061d654-eaa5-4bbf-8f1a-28cb90f6c802","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"welcome","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"515a9499-dc58-40ab-993d-a57ee436fd4f","root":false,"$title":"[GO TO] Boas vindas","$position":{"top":"196px","left":"2125px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"1cfe1499-e73f-404a-aa99-69faa0e1f14d":{"$contentActions":[{"action":{"$id":"af0deca5-c7d6-48b7-adad-421487817640","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"c91a3ae0-a885-4f1d-afe0-ddad50ec899f","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"c91a3ae0-a885-4f1d-afe0-ddad50ec899f","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"a29698c4-e02f-406d-894a-fc21f8bc602f","$typeOfContent":"text","type":"SendMessage","settings":{"id":"1831ef19-92d2-47fe-aa0e-9693460945f0","type":"text/plain","content":"{{readableHistory}}","metadata":{}},"$cardContent":{"document":{"id":"1831ef19-92d2-47fe-aa0e-9693460945f0","type":"text/plain","content":"{{readableHistory}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"516558db-9bea-419a-8000-fd8e0433b2f1","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"45cbac3f-178c-406a-bd07-66d26b95fe08","typeOfStateId":"state","$connId":"con_78","$id":"3b3390a4-d04c-4c70-b91b-d1913a37caa5","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"66d86a87-6faf-4c7f-adf7-ffa3f36f2f14","$typeOfContent":"","type":"ExecuteScript","$title":"Generate readableHistory","$invalid":false,"settings":{"function":"run","source":"function run(expensesHistory) {\n    expensesHistory = JSON.parse(expensesHistory);\n    let readableHistory = expensesHistory.reduce((prev, curr) => prev + `${curr.dateTime}\\nDescrição: ${curr.expenseDescription}\\nValor: ${formatExpenseValue(curr.expenseValue)}\\nCategoria: ${curr.expenseCategory} \\n\\n`, \"\");\n\n    return readableHistory;\n}\n\nfunction formatExpenseValue(expenseValue) {\n    let expenseValueFormated = \"R$ \" + parseFloat(expenseValue).toFixed(2).toString().replace('.', ',');\n    return expenseValueFormated;\n}","inputVariables":["expensesHistory"],"outputVariable":"readableHistory","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"1cfe1499-e73f-404a-aa99-69faa0e1f14d","root":false,"$title":"Consultar gastos","$position":{"top":"358px","left":"1002px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"167a5274-8854-4418-835a-523b92b02c58":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"d70b9070-1bd6-4f35-91b1-52c8b441a9b6","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"75c3f7e6-ce3f-419f-8e37-4ef0bd8ec98b","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"167a5274-8854-4418-835a-523b92b02c58","root":false,"$title":"[GO TO] Menu","$position":{"top":"631px","left":"1002px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"45cbac3f-178c-406a-bd07-66d26b95fe08":{"$contentActions":[{"action":{"$id":"41853484-9264-476c-b106-508f3efc49db","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"efb60516-0c06-4d17-a6a8-6847f1d4e89f","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"efb60516-0c06-4d17-a6a8-6847f1d4e89f","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"6abed1a9-8838-46d2-a217-29d61549f9c2","$typeOfContent":"text","type":"SendMessage","settings":{"id":"7f7eef87-2484-4230-90d3-33b33762ce87","type":"text/plain","content":"Gastos por categoria:\n\n{{expensesPerCategory}}","metadata":{}},"$cardContent":{"document":{"id":"7f7eef87-2484-4230-90d3-33b33762ce87","type":"text/plain","content":"Gastos por categoria:\n\n{{expensesPerCategory}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"031cba18-9f82-4aae-86ea-1906e2ec9824","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"167a5274-8854-4418-835a-523b92b02c58","typeOfStateId":"state","$connId":"con_83","$id":"9e63c2d7-b4d2-4d23-8a0b-1635969f626e","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[{"$id":"b71e1b8c-5ec0-46e8-a066-f67e2a631f77","$typeOfContent":"","type":"ExecuteScript","$title":"Executar script","$invalid":false,"settings":{"function":"run","source":"function run(expensesHistory) {\n    expensesHistory = JSON.parse(expensesHistory);\n\n    let expensesPerCategory = {};\n\n    for (let i = 0; i < expensesHistory.length; i++) {\n        expensesPerCategory[expensesHistory[i].expenseCategory] = expensesPerCategory[expensesHistory[i].expenseCategory] ? \n            parseFloat(expensesPerCategory[expensesHistory[i].expenseCategory]) + parseFloat(expensesHistory[i].expenseValue) : parseFloat(expensesHistory[i].expenseValue);\n    }\n\n    expensesPerCategory = Object.entries(expensesPerCategory);\n    expensesPerCategory = expensesPerCategory.reduce((acc, current) => acc + `${current[0]}: ${formatExpenseValue(current[1])}\\n`, \"\");\n\n    return expensesPerCategory;\n}\n\nfunction formatExpenseValue(expenseValue) {\n    let expenseValueFormated = \"R$ \" + parseFloat(expenseValue).toFixed(2).toString().replace('.', ',');\n    return expenseValueFormated;\n}","inputVariables":["expensesHistory"],"outputVariable":"expensesPerCategory","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"45cbac3f-178c-406a-bd07-66d26b95fe08","root":false,"$title":"Gastos por categoria","$position":{"top":"489px","left":"1002px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false}},"globalActions":{"$contentActions":[],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"global-actions","$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false}}